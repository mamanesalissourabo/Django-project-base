{% extends 'authentification/login_base.html' %}

{% load static %}
{% block content %}
{% load i18n %} 

<div class="d-flex flex-column flex-root mt-15">

    <!--begin::Authentication - Sign-in -->	
        <div class="d-flex flex-column-fluid flex-lg-row-auto justify-content-center">
            <!--begin::Wrapper-->
            <div class="bg-body d-flex flex-column flex-center rounded-4 w-md-500px p-10">
                <!--begin::Content-->
                <div class="d-flex flex-center flex-column align-items-stretch  w-md-400px">
                    <!--begin::Wrapper-->
                    <div class="d-flex flex-center flex-column flex-column-fluid pb-15 pb-lg-20">
                    
                        <!--begin::Form-->
                        <form method="post" class="form w-100" novalidate="novalidate" id="kt_sign_in_form" action="#">
                            {% csrf_token %}

                            <!--begin::Heading-->
                            <div class="text-center mb-10">
                                <img alt="Logo" src="{% static 'assets/media/logos/logo_safetyfirst.png' %}" class="h-100px mb-8 app-sidebar-logo-default me-2" style="width: 150px; margin-inline-start: 10px;" />
                                <!-- <h1 class="text-gray-900 fw-bolder mb-10 mt-3"> {% trans "Safetyfirst" %} </h1> -->
                                <p class="mb-6 fs-5 text-muted"> {% trans "Veuillez vous connecter à votre compte et commencer l'aventure" %} </p>
                            </div>
                            <!--begin::Heading-->

                            <!--begin::Input group=-->
                            <div class="fv-row mb-8">
                                <!--begin::Email-->
                                <label for="{{ form.username.id_for_label }}" class="form-label"> {{ form.username.label }} </label>
                                {{ form.username }}
                                <!--end::Email-->
                            </div>
                            <!--end::Input group=-->

                            <div class="fv-row mb-3">
                                <!--begin::Password-->
                                <label for="{{ form.password.id_for_label }}" class="form-label">{{ form.password.label }}</label>
                                {{ form.password }}
                                <!--end::Password-->
                            </div>
                            <!--end::Input group=-->
                            
                            <!--begin::Wrapper-->
                            <div class="d-flex flex-stack flex-wrap gap-3 fs-base fw-semibold mb-8">
                                <div></div>
                                <!--begin::Link-->
                                <a href="" class="link-primary">{% trans "Mot de passe oublié ?" %}</a>
                                <!--end::Link-->
                            </div>
                            <!--end::Wrapper-->

                            <!--begin::Submit button-->
                            <div class="d-grid">
                                <button type="submit" id="kt_sign_in_submit" class="btn btn-primary">
                                    <!--begin::Indicator label-->
                                    <span class="indicator-label">{% trans "Se connecter" %}</span>
                                    <!--end::Indicator label-->
                                </button>
                            </div>
                            <!--end::Submit button-->
                            
                            </form>
                        <!--end::Form-->
                    </div>
                    <!--end::Wrapper-->

                    <div class="d-flex flex-stack">
                        <!--begin::Languages-->
                        <div class="me-10">
                            <!--begin::Toggle-->
                            <button class="btn btn-flex btn-link btn-color-gray-700 btn-active-color-primary rotate fs-base" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-start" data-kt-menu-offset="0px, 0px">
                                <!-- Afficher le drapeau et le nom de la langue active -->
                                <img data-kt-element="current-lang-flag" class="w-20px h-20px rounded me-3" 
                                        src="{% static 'assets/media/flags/' %}{% if LANGUAGE_CODE == 'fr' %}france.svg{% elif LANGUAGE_CODE == 'en' %}united-states.svg{% elif LANGUAGE_CODE == 'ar' %}saudi-arabia.svg{% endif %}" 
                                        alt="" />
                                <span data-kt-element="current-lang-name" class="me-1">
                                    {% if LANGUAGE_CODE == 'fr' %}Français{% elif LANGUAGE_CODE == 'en' %}English{% elif LANGUAGE_CODE == 'ar' %}العربية{% endif %}
                                </span>
                                <i class="ki-duotone ki-down fs-5 text-muted rotate-180 m-0"></i>
                            </button>
                            <!--end::Toggle-->
                            <!--begin::Menu-->
                            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-semibold w-200px py-4 fs-7" data-kt-menu="true" id="kt_auth_lang_menu">
                                <!-- Formulaire de changement de langue -->
                                <form action="{% url 'set_language' %}" method="post" id="language-form">
                                    {% csrf_token %}
                                    <input name="next" type="hidden" value="{{ request.path }}" />
                                    <!--begin::Menu item - Français -->
                                    <div class="menu-item px-3">
                                        <a href="#" class="menu-link d-flex px-5" data-kt-lang="French" onclick="changeLanguage('fr')">
                                            <span class="symbol symbol-20px me-4">
                                                <img data-kt-element="lang-flag" class="rounded-1" src="{% static 'assets/media/flags/france.svg' %}" alt="" />
                                            </span>
                                            <span data-kt-element="lang-name">Français</span>
                                        </a>
                                    </div>
                                    <!--end::Menu item-->
                                    <!--begin::Menu item - English -->
                                    <div class="menu-item px-3">
                                        <a href="#" class="menu-link d-flex px-5" data-kt-lang="English" onclick="changeLanguage('en')">
                                            <span class="symbol symbol-20px me-4">
                                                <img data-kt-element="lang-flag" class="rounded-1" src="{% static 'assets/media/flags/united-states.svg' %}" alt="" />
                                            </span>
                                            <span data-kt-element="lang-name">English</span>
                                        </a>
                                    </div>
                                    <!--end::Menu item-->
                                    <!--begin::Menu item - العربية -->
                                    <div class="menu-item px-3">
                                        <a href="#" class="menu-link d-flex px-5" data-kt-lang="Arabic" onclick="changeLanguage('ar')">
                                            <span class="symbol symbol-20px me-4">
                                                <img data-kt-element="lang-flag" class="rounded-1" src="{% static 'assets/media/flags/saudi-arabia.svg' %}" alt="" />
                                            </span>
                                            <span data-kt-element="lang-name">العربية</span>
                                        </a>
                                    </div>
                                    <!--end::Menu item-->
                                </form>
                            </div>
                            <!--end::Menu-->
                        </div>
                        <!--end::Languages-->
                        <!--begin::Links-->
                        <div class="d-flex fw-semibold text-primary fs-base gap-5">
                            <!-- <a href="pages/contact.html" target="_blank">{% trans "Nous Contacter !" %}</a> -->
                        </div>
                        <!--end::Links-->
                    </div>


                    <!-- Script pour le changement de langue -->
                    <script>
                        function changeLanguage(languageCode) {
                            const form = document.getElementById('language-form');
                            const languageInput = document.createElement('input');
                            languageInput.type = 'hidden';
                            languageInput.name = 'language';
                            languageInput.value = languageCode;
                            form.appendChild(languageInput);
                            form.submit();
                        }
                    </script>
                    <!--end::Footer-->
                </div>
                <!--end::Content-->
            </div>
            <!--end::Wrapper-->
        </div>
        <!--end::Body-->
    <!--end::Authentication - Sign-in-->

</div>

<style>

/* Style pour le wrapper du formulaire */
.bg-body.d-flex.flex-column.flex-center.rounded-4.w-md-500px.p-10 {
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    overflow: hidden;
    width: 100%;
}
/* Style personnalisé pour les inputs en focus */
.form-control:focus {
    border-color: #0d6efd; /* Couleur bleue Bootstrap (primary) */
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25); /* Ombre bleue subtile */
}
</style>

{% endblock content %}

